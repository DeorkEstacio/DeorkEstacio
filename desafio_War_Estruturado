// Criando as bibliotecas
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Criando as constantes globais
#define MAX_TERRITORIOS 5 
#define TAM_STRING 30

// definição da estrutura
struct Territorio {
  char nome [TAM_STRING];
  char cor_exercito [TAM_STRING];
  int quantidade_tropas;
  
};

void limparBufferentrada () {
  int c;
  while ((c = getchar()) != '\n' &&  c != EOF); 
}

int main() {
  struct Territorio territorios [MAX_TERRITORIOS];
  int totalTerritorios = 0;
  int opcao;

do { 
    
  printf("========================================\n");
  printf("   WAR ESTRUTURADO - CADASTRO INICIAL\n");
  printf("========================================\n");
  printf("1 - Cadastrar novo territorio\n");
  printf("2 - Listar todos os territorios\n");
  printf("3 - Sair\n");
  printf("----------------------------------------\n");
  printf("Escolha uma opcao\n");  

  scanf("%d", &opcao);
  limparBufferentrada(); 

  switch (opcao){
    case 1: //cadasto de território
        printf("--- Cadastrando territorio %d ---\n", totalTerritorios + 1);
        if (totalTerritorios < MAX_TERRITORIOS) {
          printf("Digite o nome do territorio\n");
          fgets(territorios[totalTerritorios].nome, TAM_STRING, stdin);

          printf("Digite a cor do exercito\n");
          fgets(territorios[totalTerritorios].cor_exercito, TAM_STRING, stdin);

          territorios[totalTerritorios].nome[strcspn(territorios[totalTerritorios].nome, "\n")] = '\0';
          territorios[totalTerritorios].cor_exercito[strcspn(territorios[totalTerritorios].cor_exercito, "\n")] = '\0';

          printf("Digite a quantidade de tropas\n");
          scanf("%d", &territorios[totalTerritorios].quantidade_tropas);
          limparBufferentrada();

          totalTerritorios++;

          printf("\nTerritorio cadastrado com sucesso!\n");
        } else {
          printf("Não e possivel cadastrar mais territorios.");
        }

        printf("\nPressione enter para continuar...");
        getchar(); // Pausa para o usuário ler a mensagem antes de voltar ao menu.
        break;
